<div class="box">
  <!-- Botón para volver al listado de productos -->
  <div class="view-products">
    <a id="button-products" class="button" href="/products">Volver</a>
  </div>

  <h1>Carrito</h1>

  <section class="products-box">
    {{#if cart.products.length}}
      {{#each cart.products}}
        <article class="product-card">
          <h3>{{this.product.title}}</h3>
          <hr>
          <p>Código: {{this.product.code}}</p>
          <p>Categoría: {{this.product.category}}</p>
          <p>Precio: $ {{this.product.price}}</p>
          <p>Cantidad: {{this.quantity}}</p>
          <p>Subtotal: $ {{multiply this.product.price this.quantity}}</p>
        </article>
      {{/each}}
    {{else}}
      <p>No hay productos en el carrito.</p>
    {{/if}}
  </section>

  <!-- Botón para finalizar compra -->
  <div class="footer">
    <button id="button-purchase" onclick="finalizeCartPurchase('{{cart._id}}')">
      Finalizar compra
    </button>
  </div>

  <!-- Ticket generado -->
  {{#if ticket}}
    <div class="ticket-box">
      <h2>Ticket de compra</h2>
      <p>Código: {{ticket.code}}</p>
      <p>Monto total: $ {{ticket.amount}}</p>
      <p>Comprador: {{ticket.purchaser}}</p>
    </div>
  {{/if}}

  <!-- Productos no disponibles -->
  {{#if unfulfilledItems}}
    <div class="unavailable-box">
      <h2>Productos no disponibles</h2>
      <ul>
        {{#each unfulfilledItems}}
          <li>{{this.title}}</li>
        {{/each}}
      </ul>
    </div>
  {{/if}}
</div>

<script src="/js/ecommerce.js"></script>