# ğŸ›’ Backend Ecommerce â€“ Entrega 1

Proyecto desarrollado como parte del curso de Backend en Coderhouse. Esta entrega implementa un servidor Express con autenticaciÃ³n JWT, persistencia en MongoDB, vistas con Handlebars y operaciones completas sobre productos, carritos y usuarios.

[ğŸ”— Repositorio en GitHub](https://github.com/usuario/repositorio) <!-- ReemplazÃ¡ con tu link real -->

---

## ğŸš€ TecnologÃ­as utilizadas

- Node.js + Express
- MongoDB + Mongoose
- Handlebars
- JSON Web Tokens (JWT)
- Passport + passport-jwt + passport-local
- Bcrypt
- Dotenv
- Nodemon

---

## ğŸ“ Estructura del proyecto
src/ â”œâ”€â”€ config/           # ConfiguraciÃ³n de MongoDB y Passport 
     â”œâ”€â”€ dao/              # Acceso a datos (carritos, productos) 
     â”œâ”€â”€ models/           # Esquemas de Mongoose (Product, Cart, User) 
     â”œâ”€â”€ routes/           # Rutas de API y vistas 
     â”œâ”€â”€ views/            # Plantillas Handlebars 
     â”œâ”€â”€ public/           # Archivos estÃ¡ticos 
     â”œâ”€â”€ utils/            # Constantes y helpers 
     â”œâ”€â”€ app.js            # ConfiguraciÃ³n principal del servido


---

## ğŸ” AutenticaciÃ³n y AutorizaciÃ³n

- Registro (`POST /api/sessions/register`): crea usuario con contraseÃ±a encriptada y carrito automÃ¡tico
- Login (`POST /api/sessions/login`): genera token JWT vÃ¡lido
- Ruta protegida (`GET /api/sessions/current`): devuelve datos del usuario autenticado mediante JWT

---

## ğŸ“¦ Endpoints de productos

| MÃ©todo | Ruta                      | DescripciÃ³n                  |
|--------|---------------------------|------------------------------|
| GET    | `/api/products`           | Listar todos los productos   |
| GET    | `/api/products/:pid`      | Obtener producto por ID      |
| POST   | `/api/products`           | Crear nuevo producto         |
| PUT    | `/api/products/:pid`      | Actualizar producto          |
| DELETE | `/api/products/:pid`      | Eliminar producto            |

---

## ğŸ›’ Endpoints de carritos

| MÃ©todo | Ruta                                         | DescripciÃ³n                        |
|--------|----------------------------------------------|------------------------------------|
| GET    | `/api/carts/:cid`                            | Obtener carrito por ID             |
| POST   | `/api/carts/:cid/product/:pid`               | Agregar producto al carrito        |
| DELETE | `/api/carts/:cid/product/:pid`               | Eliminar producto del carrito      |
| PUT    | `/api/carts/:cid`                            | Reemplazar productos del carrito   |
| DELETE | `/api/carts/:cid`                            | Vaciar carrito                     |

---

## ğŸ¨ Vistas con Handlebars

- `/` â†’ Muestra productos
- `/cart/:cid` â†’ Muestra productos del carrito
- `*` â†’ PÃ¡gina no encontrada (`notFound.handlebars`)

---

## âš™ï¸ Variables de entorno

Crear un archivo `.env` en la raÃ­z con el siguiente contenido:

```env
MONGO_URI=mongodb+srv://<usuario>:<password>@<cluster>.mongodb.net/ecommerce
JWT_SECRET=claveultrasecreta
PORT=8080

ğŸ§ª CÃ³mo ejecutar el proyecto
git clone https://github.com/usuario/repositorio
cd repositorio
npm install
npm run dev

ğŸ“œ Modelo de Usuario
{
  first_name: String,
  last_name: String,
  email: { type: String, unique: true, required: true },
  age: Number,
  password: { type: String, required: true },
  cart: { type: mongoose.Schema.Types.ObjectId, ref: 'carts' },
  role: { type: String, default: 'user' }
}


ContraseÃ±a encriptada con bcrypt.hashSync. El carrito se crea automÃ¡ticamente al registrarse.

ğŸ“¬ Autor
Patricio Pulega â€“ Entrega 1 Backend 2 â€“ Coderhouse




